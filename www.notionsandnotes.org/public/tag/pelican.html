<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="utf-8">
    <title>Notions and Notes <small>pelican</small></title>
    <meta name="description" content="">
    <meta name="author" content="George S.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
    <script src="../theme/html5.js"></script>
    <![endif]-->


    <!-- Le styles -->
    <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.1.1/css/bootstrap.no-icons.min.css" rel="stylesheet">
    <link href="../theme/local.css" rel="stylesheet">
    <link href="../theme/pygments.css" rel="stylesheet">
    <link href="../theme/font-awesome.css" rel="stylesheet">
    <link href='https://fonts.googleapis.com/css?family=Gudea:400,400italic|Alegreya+SC' rel='stylesheet' type='text/css'>

</head>

<body>
<header class="blog-header">
  <div class="container">
    <div class="row-fluid">
      <div class="span9">
	<a href=".." class="brand">Notions and Notes</a>
      </div>

      <div class="span3" id="blog-nav">
	<ul class="nav nav-pills pull-right">
	    <li >
	      <a href="../category/analysis.html ">Analysis</a>
	    <li >
	      <a href="../category/tech.html ">Tech</a>
	</ul>
      </div>
    </div> <!-- End of fluid row-->
  </div>   <!-- End of Container-->
</header>
    
<div class="container">
    <div class="content">
    <div class="row-fluid">
        <div class="span12">
        

        

    <div class='row-fluid''>
        <div class="article-title span11">
            <a href="../posts/2015/Apr/pelican-setup/"><h1>How this blog was set up using&nbsp;Pelican</h1></a>
        </div>
    </div>
    <div class="row-fluid">
      <div class="article-sidebar span3">
<p>10 April 2015 </p>

<b> Category :</b>
<nav>
<ul>
    <li>
        <a href="../category/tech.html">Tech</a>
    </li>
</ul>
</nav>

    <div class="span10">
        <p class="tag_heading">Tags:</p>
        <ul class="tag-list">
            <li class="tag"><i class="icon-tags muted"></i><a href="../tag/pelican.html">pelican</a></li>
            <li class="tag"><i class="icon-tags muted"></i><a href="../tag/python.html">python</a></li>
        </ul>
    <hr>
    </div>

    <div class="row-fluid">
    <p><b>Contents</b></p>
        <nav>
            <div class="toc">
<ul>
<li><a href="#why-a-static-site">Why a static site?</a></li>
<li><a href="#setting-up-pip-and-virtualenv">Setting up pip and virtualenv</a></li>
<li><a href="#installing-pelican-themes-and-plugins">Installing pelican, themes and plugins</a></li>
<li><a href="#configuration-file">Configuration file</a></li>
<li><a href="#workflow">Workflow</a></li>
</ul>
</div>
        </nav>
    <hr>
    </div>



      </div>
      <div class="article-content span8">
	
<p><strong>Table of contents</strong></p>
<div class="toc">
<ul>
<li><a href="#why-a-static-site">Why a static site?</a></li>
<li><a href="#setting-up-pip-and-virtualenv">Setting up pip and virtualenv</a></li>
<li><a href="#installing-pelican-themes-and-plugins">Installing pelican, themes and plugins</a></li>
<li><a href="#configuration-file">Configuration file</a></li>
<li><a href="#workflow">Workflow</a></li>
</ul>
</div>
<p>In this post it is documented how this blog was constructed using a static site maker, meaning, 
there is no server-side processing of data.</p>
<hr/>
<h3 id="why-a-static-site">Why a static site?<a class="headerlink" href="#why-a-static-site" title="Permanent link">¶</a></h3>
<hr/>
<p>The three main reasons are, simplicity, control, and <em>because I can do it</em>.</p>
<p>Compared to wordpress, static sites in Markdown or other simple formatting languages such as 
<a href="http://docutils.sourceforge.net/rst.html">reStructuredText</a>, are much simpler and much easier to control, and less susceptible 
to version changes. Pre-publication testing is easy and can be done offline. Deploying is simply copying the files
to a server. There is no <span class="caps">PHP</span> or database setup required. The hosting resources required are very small, allowing
one to use very cheap hosts such as <a href="http://nearlyfreespeech.net">NearlyFreeSpeech</a>.</p>
<p>Markdown is chosen because various math sites use it and <a href="https://github.com/getpelican/pelican">pelican</a> 
was chose because it is Pythonic. Python is  a language I was interested in at various times, 
and I do not have time to learn another language such as <a href="https://www.ruby-lang.org/">Ruby</a> to 
use alternate popular static site platforms such as <a href="http://jekyllrb.com/">Jekyll</a>. </p>
<p>Also all this is very well-integrated with Linux, my favorite operating system.</p>
<hr/>
<h3 id="setting-up-pip-and-virtualenv">Setting up pip and virtualenv<a class="headerlink" href="#setting-up-pip-and-virtualenv" title="Permanent link">¶</a></h3>
<hr/>
<p>It is expected that:</p>
<ul>
<li>The user is proficient in Linux and the terminal. It is assumed in the following that we are working on an Ubuntu 14 installation.</li>
<li>User is proficient in <a href="http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO.html">bash</a> and knows how to use <a href="https://www.python.org">python</a>.</li>
<li>User knows utilities such as <code>git</code>, <code>make</code>, etc., and is familiar with web servers.</li>
</ul>
<p><code>pip</code> is the python package installer. It takes care of all the Pythonic dependency hell. Use:</p>
<div class="highlight"><pre><span class="gp">george@soliloquy:~$</span> sudo apt-get install -y python-pip python-virtualenv virtualenvwrapper
</pre></div>
<p>We do not want to do any global python package installations from now onwards. The method is to use 
<a href="http://docs.python-guide.org/en/latest/dev/virtualenvs/">virtual environments</a> in which the user installs
packages inside a local directory and runs them through wrapper scripts. There can be multiple such environments and the user can switch back and forth between them, with parameters being different each time. This gives much flexibility for development.</p>
<p>Now we create the <code>virtualenv</code> named <code>pelican</code> for our blogging purposes. The machine is named <code>soliloquy</code>.</p>
<div class="highlight"><pre><span class="gp">george@soliloquy:~$</span> mkvirtualenv pelican
<span class="go">Running virtualenv with interpreter /usr/bin/python2</span>
<span class="go">New python executable in pelican/bin/python2</span>
<span class="go">Also creating executable in pelican/bin/python</span>
<span class="go">Installing setuptools, pip...done.</span>
<span class="gp">(pelican)george@soliloquy:~$</span>
</pre></div>
<p>Note the change in the <code>bash</code> prompt. Use <code>workon</code> and <code>deactivate</code> to activate/deactive the python environment:</p>
<div class="highlight"><pre><span class="gp">george@soliloquy:~$</span> workon pelican
<span class="gp">(pelican)george@soliloquy:~$</span> deactivate
<span class="gp">george@soliloquy:~$</span>
</pre></div>
<p>This sequence will be part of the blogging workflow whenever required.</p>
<hr/>
<h3 id="installing-pelican-themes-and-plugins">Installing pelican, themes and plugins<a class="headerlink" href="#installing-pelican-themes-and-plugins" title="Permanent link">¶</a></h3>
<hr/>
<p>Install <code>pelican</code>:</p>
<div class="highlight"><pre><span class="gp">george@soliloquy:~$</span> mkdir ~/work/blog
<span class="gp">george@soliloquy:~$</span> <span class="nb">cd</span> ~/work/blog
<span class="gp">george@soliloquy:~/work/blog$</span> workon pelican
<span class="gp">(pelican)george@soliloquy:~/work/blog$</span> pip install pelican
</pre></div>
<p>It downloads and install many packages and finishes with:</p>
<div class="highlight"><pre><span class="go">Successfully installed pelican jinja2 blinker pygments docutils python-dateutil pytz six feedgenerator unidecode markupsafe</span>
<span class="go">Cleaning up...</span>
<span class="gp">(pelican)george@soliloquy:~/work/blog$</span>
</pre></div>
<p>Install additional packages:</p>
<div class="highlight"><pre><span class="gp">(pelican)george@soliloquy:~/work/blog$</span> pip install Markdown beautifulsoup4 typogrify Pillow webassets
</pre></div>
<p>Create directory <code>pelican</code> and run <code>pelican-quickstart</code> to set up the pelican blogging platform inside it:</p>
<div class="highlight"><pre><span class="gp">(pelican)george@soliloquy:~/work/blog$</span> mkdir pelican
<span class="gp">(pelican)george@soliloquy:~/work/blog$</span> pelican-quickstart 
<span class="go">Welcome to pelican-quickstart v3.5.0.</span>

<span class="go">This script will help you create a new Pelican-based website.</span>

<span class="go">Please answer the following questions so this script can generate the files needed by Pelican.</span>


<span class="go">&gt; Where do you want to create your new web site? [.] pelican</span>
<span class="go">&gt; What will be the title of this web site? Notions and Notes</span>
<span class="go">&gt; Who will be the author of this web site? George S.</span>
<span class="go">&gt; What will be the default language of this web site? [en] </span>
<span class="go">&gt; Do you want to specify a URL prefix? e.g., http://example.com   (Y/n) </span>
<span class="go">&gt; What is your URL prefix? (see above example; no trailing slash) http://www.notionsandnotes.org</span>
<span class="go">&gt; Do you want to enable article pagination? (Y/n) </span>
<span class="go">&gt; How many articles per page do you want? [10] </span>
<span class="go">&gt; Do you want to generate a Fabfile/Makefile to automate generation and publishing? (Y/n) </span>
<span class="go">&gt; Do you want an auto-reload &amp; simpleHTTP script to assist with theme and site development? (Y/n) </span>
<span class="go">&gt; Do you want to upload your website using FTP? (y/N) </span>
<span class="go">&gt; Do you want to upload your website using SSH? (y/N) y</span>
<span class="go">&gt; What is the hostname of your SSH server? [localhost] notionsandnotes</span>
<span class="go">&gt; What is the port of your SSH server? [22] </span>
<span class="go">&gt; What is your username on that server? [root] </span>
<span class="go">&gt; Where do you want to put your web site on that server? [/var/www] </span>
<span class="go">&gt; Do you want to upload your website using Dropbox? (y/N) </span>
<span class="go">&gt; Do you want to upload your website using S3? (y/N) </span>
<span class="go">&gt; Do you want to upload your website using Rackspace Cloud Files? (y/N) </span>
<span class="go">&gt; Do you want to upload your website using GitHub Pages? (y/N) </span>
<span class="go">Done. Your new project is available at /home/george/work/blog/pelican</span>
</pre></div>
<p>Note that, here, the full details of the ssh server are not provided. In my case, it is stored instead
in the <code>~/.ssh/config</code> file, as per <a href="http://nerderati.com/2011/03/17/simplify-your-life-with-an-ssh-config-file/">ssh config</a>
directives. Replace it as necessary.</p>
<p>We do typesetting using <a href="http://daringfireball.net/projects/markdown/">Markdown</a>. Under the <code>~/work/blog</code> directory, we store the site files 
in various subdirectories of the directory <code>raw</code>. The published site is stored under another 
directory <code>www.notionsandnotes.org</code>. As mentioned earlier, <code>pelican</code> directory stores the files
for pelican. So we have three subdirectories in total for the <code>blog</code> directory.</p>
<p>Now set up these two additional directories and also initialize <a href="http://git-scm.com/documentation">git</a> to enable version control and rollbacks(if required):</p>
<div class="highlight"><pre><span class="gp">(pelican)george@soliloquy:~/work/blog$</span> mkdir www.notionsandnotes.org
<span class="gp">(pelican)george@soliloquy:~/work/blog$</span> mv pelican/content ./raw
<span class="gp">(pelican)george@soliloquy:~/work/blog$</span> git init .
<span class="gp">(pelican)george@soliloquy:~/work/blog$</span> git add .
<span class="gp">(pelican)george@soliloquy:~/work/blog$</span> git commit -m <span class="s2">"Initial commit"</span>
</pre></div>
<p>Now to use pelican <a href="https://github.com/getpelican/pelican-themes">themes</a> and <a href="https://github.com/getpelican/pelican-plugins">plugins</a>, clone these from github as <a href="http://git-scm.com/book/en/v2/Git-Tools-Submodules">submodules</a>:</p>
<div class="highlight"><pre><span class="gp">(pelican)george@soliloquy:~/work/blog$</span> <span class="nb">cd </span>pelican
<span class="gp">(pelican)george@soliloquy:~/work/blog$</span> git submodule add https://github.com/getpelican/pelican-themes.git themes 
<span class="gp">(pelican)george@soliloquy:~/work/blog$</span> git submodule add https://github.com/getpelican/pelican-plugins.git plugins
<span class="gp">(pelican)george@soliloquy:~/work/blog$</span> <span class="nb">cd</span> ..
<span class="gp">(pelican)george@soliloquy:~/work/blog$</span> git -commit -m <span class="s2">"Themes+Plugins"</span>
</pre></div>
<hr/>
<h3 id="configuration-file">Configuration file<a class="headerlink" href="#configuration-file" title="Permanent link">¶</a></h3>
<hr/>
<p>There are two config files, <code>pelicanconf.py</code> and <code>publishconf.py</code>. We mostly work with the latter. 
Both are python files. Set the following configuration directives:</p>
<div class="highlight"><pre><span class="n">PLUGIN_PATHS</span> <span class="o">=</span> <span class="p">[</span><span class="s">'./plugins'</span><span class="p">]</span>
<span class="n">PLUGINS</span> <span class="o">=</span> <span class="p">[</span><span class="s">'extract_toc'</span><span class="p">,</span><span class="s">'render_math'</span><span class="p">,</span><span class="s">'disqus_static'</span><span class="p">,</span><span class="s">'better_figures_and_images'</span><span class="p">]</span>
<span class="n">MD_EXTENSIONS</span> <span class="o">=</span> <span class="p">[</span><span class="s">'codehilite'</span><span class="p">,</span><span class="s">'extra'</span><span class="p">,</span><span class="s">'smarty'</span><span class="p">,</span> <span class="s">'toc'</span><span class="p">]</span>
</pre></div>
<p>We have included plugins for: <a href="https://github.com/getpelican/pelican-plugins/tree/master/extract_toc">table of contents</a>, <a href="https://github.com/barrysteyn/pelican_plugin-render_math">LaTeX rendering of math</a>, etc., and similar Markdown extensions are added too. The <code>toc</code> Markdown extension
is for example required for the <code>extract_toc</code> plugin. The “Better Figures and Images” plugin is taken <a href="http://duncanlock.net/blog/2013/05/29/better-figures-images-plugin-for-pelican/">from Duncan Lock</a>, 
whose site was most helpful for this pelican setup. Plugin <a href="https://github.com/getpelican/pelican-plugins/tree/master/assets">assets</a> is for 
minification of javascript etc..</p>
<p>Now set the directives:</p>
<div class="highlight"><pre><span class="n">PATH</span> <span class="o">=</span> <span class="s">'../raw'</span>
<span class="n">OUTPUT_PATH</span> <span class="o">=</span> <span class="s">'../www.notionsandnotes.org/'</span>
<span class="n">STATIC_PATHS</span> <span class="o">=</span> <span class="p">[</span><span class="s">'extra'</span><span class="p">,</span> <span class="s">'images'</span><span class="p">,</span> <span class="s">'pdfs'</span><span class="p">]</span>
<span class="n">EXTRA_PATH_METADATA</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'extra/robots.txt'</span><span class="p">:</span> <span class="p">{</span><span class="s">'path'</span><span class="p">:</span> <span class="s">'robots.txt'</span><span class="p">},</span>
    <span class="s">'extra/favicon.ico'</span><span class="p">:</span> <span class="p">{</span><span class="s">'path'</span><span class="p">:</span> <span class="s">'favicon.ico'</span><span class="p">},</span>
    <span class="s">'extra/htaccess'</span><span class="p">:</span> <span class="p">{</span><span class="s">'path'</span><span class="p">:</span> <span class="s">'.htaccess'</span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p>Create a <a href="http://querbalken.net/add-favicon-to-my-adoption-of-pelican-theme-tuxlite_tbs-en.html">favicon</a> and <a href="https://github.com/getpelican/pelican/wiki/Tips-n-Tricks">robots.txt</a> as required. A <a href="http://docs.getpelican.com/en/latest/tips.html">custom 404 page</a> can be embedded via a
.htaccess configuration directive.</p>
<p>We use the <code>built-texts</code> theme and the following directives are added as data for it:</p>
<div class="highlight"><pre><span class="n">THEME</span> <span class="o">=</span> <span class="s">'themes/built-texts'</span>

<span class="n">COLOPHON</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">COLOPHON_TITLE</span> <span class="o">=</span> <span class="s">'About'</span>
<span class="n">COLOPHON_CONTENT</span> <span class="o">=</span> <span class="s">"Mainly...."</span>
</pre></div>
<p>Edit the <a href="http://www.gnu.org/software/make/manual/make.html">Makefile</a> as follows:</p>
<div class="highlight"><pre><span class="nv">INPUTDIR</span><span class="o">=</span><span class="k">$(</span>BASEDIR<span class="k">)</span>/../raw
<span class="nv">OUTPUTDIR</span><span class="o">=</span><span class="k">$(</span>BASEDIR<span class="k">)</span>/../www.notionsandnotes.org
</pre></div>
<p>Add in other parameters, such as the ssh hostname, as required.</p>
<hr/>
<h3 id="workflow">Workflow<a class="headerlink" href="#workflow" title="Permanent link">¶</a></h3>
<hr/>
<p>First, enable the virtual environment ‘pelican’ using ‘workon’(and remember to ‘deactivate’ it later.
Posts are created and edited using plain text editors in files with *.md extensions, in Markdown format.
For example, these are the first few lines of the Markdown for this page:</p>
<div class="highlight"><pre>Title: How this blog was set up using Pelican
Date: 2015-04-10 
Category: Tech
Subcategory: Blogging
Tags: pelican, python
Slug: pelican-setup

[TOC]

**Table of contents**

[TOC]

In this post it is documented how this blog was constructed using a static 
site maker, meaning, there is no server-side processing of data.
</pre></div>
<p>More details are available at the <a href="http://pelican.readthedocs.org/en/latest/quickstart.html">Pelican Documentation</a> website.</p>
<p>After the articles or pages are edited, the compilation and static site generation are done by <code>make html</code>.
Running <code>make devserver</code> will fire up a local server at <code>http://localhost:8000</code>, which can be used for
pre-publication viewing. Note that this will require fixing up of the <code>pelicanconf.py</code> file in addition 
to <code>publishconf.py</code> which was edited earlier. In particular, relative URLs to be enabled in pre-publication
mode in order for us to be able to follow links in the browser. </p>
<p>After viewing, <code>Ctrl + C</code> will stop the server and return to shell.</p>
<p>For publication, run <code>make publish</code>, and later upload via <code>make rsync_upload</code>, which uploads only the
necessary files using 
<a href="https://www.digitalocean.com/community/tutorials/how-to-use-rsync-to-sync-local-and-remote-directories-on-a-vps">rsync</a> + ssh.</p> 
	<a class="btn btn-mini xsmall" href="../posts/2015/Apr/pelican-setup/">
          <i class="icon-comment"></i> Comment </a>
	<hr />
      </div>
      
    </div>
    
<div class="pagination">
<ul>
    <li class="prev disabled"><a href="#">&larr; Previous</a></li>

    <li class="active"><a href="../tag/pelican.html">1</a></li>

    <li class="next disabled"><a href="#">&rarr; Next</a></li>

</ul>
</div>
 
  
        </div>
        
        
    </div>     </div> </div>

<!--footer-->
<div class="container">
  <div class="well" style="background-color: #E9EFF6">
    <div id="blog-footer">
      <div class="row-fluid">
	<div class="social span2" align="center" id="socialist">
	  <ul class="nav nav-list">
	    <li class="nav-header">
	      Social
	    </li>
	    <li><a href="https://github.com/notionsandnotes"><i class="icon-Github" style="color: #1f334b"></i>Github</a></li>
	    <li><a href="http://math.stackexchange.com/users/230418/"><i class="icon-Stack Exchange" style="color: #1f334b"></i>Stack Exchange</a></li>
	    <li><a href="https://twitter.com/NotionsandNotes"><i class="icon-Twitter" style="color: #1f334b"></i>Twitter</a></li>
	    <li><a href="https://www.facebook.com/notionsandnotes"><i class="icon-Facebook" style="color: #1f334b"></i>Facebook</a></li>

	  </ul>
	</div>
<div class="span8" id="colophon">
  <h2 align="center">About</h2>
  <p align="justify"> Mainly notes, activity log, and sometimes personal blog, of an amateur mathematician, by which it is meant that the author did go through graduate school, but did not complete it to a Ph. D.. Obviously he still maintains interest in the same. Resuming mathematics full-time seems hard against the severe demands of life. The years rush by, but the dream persists. Borrowing Robert Browning,<br><br><center><a href='http://www.bartleby.com/42/675.html'>Ah, but a man's reach should exceed his grasp,<br>Or what's a heaven for?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></center><br><br>Contact can made be via Twitter or e-mail to notionsandnotes at notionsandnotes dot org. </p>
</div>
        <div class="links span2" align="center">
          <ul class="nav nav-list">
            <li class="nav-header"> 
              Links
            </li>
            
            <li><a href="http://www.notionsandnotes.org/pages/math-links.html">Bookmarks</a></li>
            <li><a href="http://arxiv.org/archive/math/">ArXiv</a></li>
            <li><a href="http://www.ams.org/mathscinet/">Mathscinet</a></li>
          </ul>
        </div>
	<div class="site-nav span2" align="center">
          <ul class="nav nav-list" id="site-links">
            <li class="nav-header"> 
              Site
            </li>
            <li><a href=".."><i class="icon-home" style="color: #1f334b">
                </i>Home</a></li>
            <li><a href="../archives.html"><i class="icon-list" style="color: #1f334b">
                </i>Archives</a></li>
	    <li><a href="../tags.html"><i class="icon-tags" style="color: #1f334b">
                </i>Tags</a></li>
	    
	  </ul>

        </div>

      </div> <!--end of fluid row-->
    </div> <!--end of blog-footer-->
    <hr />
    <p align="center"><a href="..">Notions and Notes</a>
      &copy; George S.
    Powered by <a href="https://github.com/getpelican/pelican">Pelican</a> and
        <a href="https://twitter.github.com/bootstrap">Twitter Bootstrap</a>. 
        Icons by <a href="https://fortawesome.github.com/Font-Awesome">Font Awesome</a> and 
        <a href="https://gregoryloucas.github.com/Font-Awesome-More">Font Awesome More</a></p>

  </div> <!--end of well -->
</div> <!--end of container -->

<!--/footer-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/js/bootstrap.min.js"></script>



</body>
</html>